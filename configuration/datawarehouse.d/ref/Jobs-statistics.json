{
    "job_count": {
        "formula": "COALESCE(SUM(agg.ended_job_count), 0)",
        "name": "Number of Jobs Ended",
        "description_html": "The total number of ${ORGANIZATION_NAME} jobs that ended within the selected duration.<br/><i>Job: </i>A scheduled process for a computer resource in a batch processing environment.",
        "unit": "Number of Jobs",
        "precision": 0,
        "order": 2
    },
    "running_job_count": {
        "#": "Support different formulas for aggregate and timeseries queries",
        "timeseries_formula": "SUM(agg.running_job_count)",
        "aggregate_formula": "COALESCE(SUM(CASE ${DATE_TABLE_ID_FIELD} WHEN ${MIN_DATE_ID} THEN agg.running_job_count ELSE agg.started_job_count END), 0)",
        "name": "Number of Running Jobs",
        "description_html": "The total number of ${ORGANIZATION_NAME} jobs that are running.<br/><i>Job: </i>A scheduled process for a computer resource in a batch processing environment.",
        "unit": "Number of Jobs",
        "precision": 0,
        "order": 1
    },
    "started_job_count": {
        "formula": "COALESCE(SUM(agg.started_job_count), 0)",
        "name": "Number of Jobs Started",
        "unit": "Number of Jobs",
        "precision": 0,
        "description_html": "The total number of ${ORGANIZATION_NAME} jobs that started executing within the selected duration.<br/><i>Job: </i>A scheduled process for a computer resource in a batch processing environment."
    },
    "submitted_job_count": {
        "formula": "COALESCE(SUM(agg.submitted_job_count), 0)",
        "name": "Number of Jobs Submitted",
        "unit": "Number of Jobs",
        "precision": 0,
        "description_html": "The total number of ${ORGANIZATION_NAME} jobs that submitted/queued within the selected duration.<br/><i>Job: </i>A scheduled process for a computer resource in a batch processing environment."
    },
    "active_person_count": {
        "formula": "COUNT(DISTINCT(agg.person_id))",
        "name": "Number of Users: Active",
        "unit": "Number of Users",
        "precision": 0,
        "description_html": "The total number of users that used ${ORGANIZATION_NAME} resources."
    },
    "active_pi_count": {
        "formula": "COUNT(DISTINCT(agg.principalinvestigator_person_id))",
        "name": "Number of PIs: Active",
        "unit": "Number of PIs",
        "precision": 0,
        "description_html": "The total number of PIs that used ${ORGANIZATION_NAME} resources."
    },
    "total_cpu_hours": {
        "formula": "COALESCE(SUM(agg.cpu_time),0)/3600.0",
        "name": "CPU Hours: Total",
        "unit": "CPU Hour",
        "precision": 2,
        "description_html": "The total CPU hours (number of CPU cores x wall time hours) used by ${ORGANIZATION_NAME} jobs.<br/>For each job, the CPU usage is aggregated. For example, if a job used 1000 CPUs for one minute, it would be aggregated as 1000 CPU minutes or 16.67 CPU hours.<br /><i>Job: </i>A scheduled process for a computer resource in a batch processing environment."
    },
    "total_waitduration_hours": {
        "formula": "COALESCE(SUM(agg.waitduration),0)/3600.0",
        "name": "Wait Hours: Total",
        "unit": "Hour",
        "precision": 2,
        "description_html": "The total time, in hours, ${ORGANIZATION_NAME} jobs waited before execution on their designated resource.<br/><i>Wait Time: </i>Wait time is defined as the linear time between submission of a job by a user until it begins to execute."
    },
    "total_node_hours": {
        "formula": "COALESCE(SUM(agg.node_time),0)/3600.0",
        "name": "Node Hours: Total",
        "unit": "Node Hour",
        "precision": 2,
        "description_html": "The total node hours (number of nodes x wall time hours) used by ${ORGANIZATION_NAME} jobs.<br/><i>Job: </i>A scheduled process for a computer resource in a batch processing environment."
    },
    "total_wallduration_hours": {
        "formula": "COALESCE(SUM(agg.wallduration),0)/3600.0",
        "name": "Wall Hours: Total",
        "unit": "Hour",
        "precision": 2,
        "description_html": "The total time, in hours, ${ORGANIZATION_NAME} jobs took to execute.<br/><i>Wall Time:</i> Wall time is defined as the linear time between start and end time of execution for a particular job.<br/><i>Job: </i>A scheduled process for a computer resource in a batch processing environment."
    },
    "avg_cpu_hours": {
        "timeseries_formula": "COALESCE(SUM(agg.cpu_time) / SUM(agg.running_job_count), 0) / 3600.0",
        "aggregate_formula": "COALESCE(SUM(agg.cpu_time) / SUM(CASE ${DATE_TABLE_ID_FIELD} WHEN ${MIN_DATE_ID} THEN agg.running_job_count ELSE agg.started_job_count END), 0) / 3600.0",
        "name": "CPU Hours: Per Job",
        "unit": "CPU Hour",
        "precision": 2,
        "description_html": "The average CPU hours (number of CPU cores x wall time hours) per ${ORGANIZATION_NAME} job.<br/>For each job, the CPU usage is aggregated. For example, if a job used 1000 CPUs for one minute, it would be aggregated as 1000 CPU minutes or 16.67 CPU hours.<br/><i>Job: </i>A scheduled process for a computer resource in a batch processing environment."
    },
    "sem_avg_cpu_hours": {
        "timeseries_formula": {
            "$include": "datawarehouse.d/include/Jobs-sem-avg-cpu-hours-time.sql"
        },
        "aggregate_formula": {
            "$include": "datawarehouse.d/include/Jobs-sem-avg-cpu-hours-agg.sql"
        },
        "name": "Std Dev: CPU Hours: Per Job",
        "unit": "CPU Hour",
        "precision": 2,
        "description_html": "The average CPU hours (number of CPU cores x wall time hours) per ${ORGANIZATION_NAME} job.<br/>For each job, the CPU usage is aggregated. For example, if a job used 1000 CPUs for one minute, it would be aggregated as 1000 CPU minutes or 16.67 CPU hours.<br/><i>Job: </i>A scheduled process for a computer resource in a batch processing environment."
    },
    "avg_node_hours": {
        "timeseries_formula": "COALESCE(SUM(agg.node_time) / SUM(agg.running_job_count), 0) / 3600.0",
        "aggregate_formula": "COALESCE(SUM(agg.node_time) / SUM(CASE ${DATE_TABLE_ID_FIELD} WHEN ${MIN_DATE_ID} THEN agg.running_job_count ELSE agg.started_job_count END), 0) / 3600.0",
        "name": "Node Hours: Per Job",
        "unit": "Node Hour",
        "precision": 2,
        "description_html": "The average node hours (number of nodes x wall time hours) per ${ORGANIZATION_NAME} job.<br/><i>Job: </i>A scheduled process for a computer resource in a batch processing environment."
    },
    "sem_avg_node_hours": {
        "timeseries_formula": {
            "$include": "datawarehouse.d/include/Jobs-sem-avg-node-hours-time.sql"
        },
        "aggregate_formula": {
            "$include": "datawarehouse.d/include/Jobs-sem-avg-node-hours-agg.sql"
        },
        "name": "Std Dev: Node Hours: Per Job",
        "unit": "Node Hour",
        "precision": 2,
        "description_html": "The average CPU hours (number of CPU cores x wall time hours) per ${ORGANIZATION_NAME} job.<br/>For each job, the CPU usage is aggregated. For example, if a job used 1000 CPUs for one minute, it would be aggregated as 1000 CPU minutes or 16.67 CPU hours.<br/><i>Job: </i>A scheduled process for a computer resource in a batch processing environment."
    }
}
