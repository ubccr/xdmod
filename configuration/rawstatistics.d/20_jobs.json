{
    "+realms": [
        {
            "name": "Jobs",
            "display": "Jobs"
        }
    ],
    "Jobs": {
        "tables": [
            {
                "schema": "modw_aggregates",
                "name": "jobfact_by_day_joblist",
                "alias": "jl",
                "join": {
                    "primaryKey": "agg_id",
                    "foreignTableAlias": "agg",
                    "foreignKey": "id"
                }
            },
            {
                "schema": "modw",
                "name": "job_tasks",
                "alias": "jt",
                "join": {
                    "primaryKey": "job_id",
                    "foreignTableAlias": "jl",
                    "foreignKey": "jobid"
                }
            },
            {
                "schema": "modw",
                "name": "job_records",
                "alias": "jr",
                "join": {
                    "primaryKey": "job_record_id",
                    "foreignTableAlias": "jt",
                    "foreignKey": "job_record_id"
                }
            },
            {
                "schema": "modw",
                "name": "resourcefact",
                "alias": "rf",
                "join": {
                    "primaryKey": "id",
                    "foreignTableAlias": "jt",
                    "foreignKey": "resource_id"
                }
            },
            {
                "schema": "modw",
                "name": "nodecount",
                "alias": "nc",
                "join": {
                    "primaryKey": "id",
                    "foreignTableAlias": "jt",
                    "foreignKey": "node_count"
                }
            },
            {
                "schema": "modw",
                "name": "qos",
                "alias": "qos",
                "join": {
                    "primaryKey": "id",
                    "foreignTableAlias": "jr",
                    "foreignKey": "qos_id"
                }
            },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/tables/service_provider" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/tables/fos" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/tables/pi" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/tables/pi_institution" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/tables/system_account" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/tables/user" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/tables/user_institution" }
        ],
        "fields": [
            {
                "name": "Local Job Id",
                "formula": "IF(jt.local_job_array_index = -1, jt.local_jobid, CONCAT(jt.local_jobid, '[', jt.local_job_array_index, ']'))",
                "group": "Administration",
                "documentation": "The unique identifier assigned to the job by the job scheduler.",
                "batchExport": true
            },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/fields/resource_name" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/fields/service_provider_name" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/fields/resource_time_zone" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/fields/system_username" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/fields/user_id" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/fields/user_name" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/fields/user_institution_id" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/fields/user_institution_name" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/fields/pi_id" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/fields/pi_name" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/fields/pi_institution_id" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/fields/pi_institution_name" },
            {
                "name": "Quality of Service",
                "tableAlias": "qos",
                "column": "name",
                "group": "Administration",
                "documentation": "The job quality of service.",
                "batchExport": true
            },
            {
                "name": "Name",
                "tableAlias": "jt",
                "column": "name",
                "documentation": "The name of the job as reported by the job scheduler.",
                "group": "Executable",
                "batchExport": false
            },
            {
                "name": "Submit Time",
                "tableAlias": "jt",
                "column": "submit_time_ts",
                "group": "Timing",
                "units": "ts",
                "documentation": "Task submission time",
                "batchExport": true
            },
            {
                "name": "Start Time",
                "tableAlias": "jt",
                "column": "start_time_ts",
                "group": "Timing",
                "units": "ts",
                "documentation": "The time that the job started running.",
                "batchExport": true
            },
            {
                "name": "End Time",
                "tableAlias": "jt",
                "column": "end_time_ts",
                "units": "ts",
                "group": "Timing",
                "documentation": "The time that the job ended.",
                "batchExport": true
            },
            {
                "name": "Eligible Time",
                "tableAlias": "jt",
                "column": "eligible_time_ts",
                "units": "ts",
                "group": "Timing",
                "documentation": "The time that the job was eligible for scheduling by the resource manager.",
                "batchExport": true
            },
            {
                "name": "Nodes",
                "tableAlias": "nc",
                "column": "nodes",
                "group": "Allocated Resource",
                "documentation": "The number of nodes that were assigned to the job.",
                "batchExport": true
            },
            {
                "name": "Cores",
                "tableAlias": "jt",
                "column": "processor_count",
                "group": "Allocated Resource",
                "documentation": "The number of cores that were assigned to the job.",
                "batchExport": true
            },
            {
                "name": "GPUs",
                "tableAlias": "jt",
                "column": "gpu_count",
                "group": "Allocated Resource",
                "documentation": "The number of GPUs that were assigned to the job.",
                "batchExport": true
            },
            {
                "name": "Memory Used",
                "tableAlias": "jt",
                "column": "memory_kb",
                "group": "Allocated Resource",
                "units": "kilobyte",
                "documentation": "Memory consumed as reported by the resource manager.",
                "batchExport": true
            },
            {
                "name": "Wall Time",
                "tableAlias": "jt",
                "column": "wallduration",
                "group": "Timing",
                "units": "seconds",
                "documentation": "Overall job duration.",
                "batchExport": true
            },
            {
                "name": "Wait Time",
                "tableAlias": "jt",
                "column": "waitduration",
                "group": "Timing",
                "units": "seconds",
                "documentation": "Time the job waited in the queue",
                "batchExport": true
            },
            {
                "name": "Core Time",
                "tableAlias": "jt",
                "column": "cpu_time",
                "group": "Allocated Resource",
                "units": "seconds",
                "documentation": "The amount of CPU core time (Core Count * Wall Time)",
                "batchExport": true
            },
            {
                "name": "GPU Time",
                "tableAlias": "jt",
                "column": "gpu_time",
                "group": "Allocated Resource",
                "units": "seconds",
                "documentation": "The amount of GPU time (GPU Count * Wall Time)",
                "batchExport": true
            },
            {
                "name": "UNIX group name",
                "tableAlias": "jt",
                "column": "group_name",
                "group": "Administration",
                "documentation": "The name of the group that ran the job.",
                "batchExport": false
            },
            {
                "name": "UNIX group GID",
                "tableAlias": "jt",
                "column": "gid_number",
                "group": "Administration",
                "documentation": "The GID of the group that ran the job.",
                "batchExport": false
            },
            {
                "name": "UNIX UID",
                "tableAlias": "jt",
                "column": "uid_number",
                "group": "Administration",
                "documentation": "The UID of the user that ran the job.",
                "batchExport": false
            },
            {
                "name": "Exit Code",
                "tableAlias": "jt",
                "column": "exit_code",
                "group": "Executable",
                "documentation": "The code that the job exited with.",
                "batchExport": true
            },
            {
                "name": "Exit State",
                "tableAlias": "jt",
                "column": "exit_state",
                "group": "Executable",
                "documentation": "The state of the job when it completed.",
                "batchExport": true
            },
            {
                "name": "Requested Cores",
                "tableAlias": "jt",
                "column": "cpu_req",
                "group": "Requested Resource",
                "documentation": "The number of CPUs required by the job.",
                "batchExport": true
            },
            {
                "name": "Requested memory",
                "tableAlias": "jt",
                "column": "mem_req",
                "group": "Requested Resource",
                "units": "bytes",
                "documentation": "The amount of memory required by the job.",
                "batchExport": true
            },
            {
                "name": "Requested Wall Time",
                "tableAlias": "jt",
                "column": "timelimit",
                "group": "Requested Resource",
                "units": "seconds",
                "documentation": "The time limit of the job.",
                "batchExport": true
            },
            {
                "name": "Queue",
                "tableAlias": "jr",
                "column": "queue",
                "group": "Requested Resource",
                "documentation": "The name of the queue to which the job was submitted.",
                "batchExport": true
            },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/fields/hierarchy_top_level" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/fields/hierarchy_middle_level" },
            { "$ref": "rawstatistics.d/ref/rawstatistics-common.json#/fields/hierarchy_bottom_level" }
        ]
    }
}
