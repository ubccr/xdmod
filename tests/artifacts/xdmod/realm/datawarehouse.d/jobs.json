{
   "Jobs": {
        "module": "xdmod",
        "name": "Jobs",
        "datasource": "Slurm",
        "aggregate_schema": "modw_aggregates",
        "aggregate_table_prefix": "jobfact_by_",
        "aggregate_table_alias": "agg",
        "order": 1,
        "group_bys": {
            "person": {
                "name": "User",
                "description_html": "A person who is on a PIs allocation, hence able run jobs on resources.",
                "category": "Administrative",
                "attribute_table_schema": "modw",
                "attribute_table": "person",
                "order": 2,
                "attribute_to_aggregate_table_key_map": [
                    { "id": "person_id" }
                ],
                "#": "Simple attribute values query",
                "attribute_values_query": {
                    "records": {
                        "id": "id",
                        "short_name": "short_name",
                        "name": "long_name"
                    },
                    "joins": [
                        {
                            "name": "person"
                        }
                    ],
                    "orderby": [
                        "order_id"
                    ]
                }
            },
            "resource": {
                "name": "Resource",
                "description_html": "A resource is a remote computer that can run jobs.",
                "attribute_table": "resourcefact",
                "attribute_table_schema": "modw",
                "order": 1,
                "#": "Multi-column key",
                "attribute_to_aggregate_table_key_map": [
                    { "id": "resource_id" },
                    { "code": "resource_code" }
                ],
                "#": "Attribute values query with multiple tables and table aliases in the field values",
                "attribute_values_query": {
                    "records": {
                        "id": "rf.id",
                        "short_name": "rf.code",
                        "name": "CONCAT(rf.name, '-', rf.code)"
                    },
                    "joins": [
                        {
                            "name": "resourcefact",
                            "alias": "rf"
                        },
                        {
                            "name": "resourcespecs",
                            "alias": "rs",
                            "on": "rf.id = rs.resource_id"
                        }
                    ],
                    "where": [
                        "rs.processors IS NOT NULL"
                    ],
                    "orderby": [
                        "rf.code",
                        "rf.name"
                    ]
                }
            },
            "disabled_group_by": {
                "#": "This group by is disabled and should not be considered at all",
                "disabled": true,
                "name": "Disabled Group By",
                "description_html": "Disabled GroupBy",
                "attribute_table": "unknown",
                "attribute_to_aggregate_table_key_map": [
                ],
                "attribute_values_query": {
                }
            }

        },
        "statistics": {
            "job_count": {
                "formula": "COALESCE(SUM(agg.ended_job_count), 0)",
                "name": "${ORGANIZATION_NAME} Number of Jobs Ended",
                "description_html": "The total number of ${ORGANIZATION_NAME} jobs that ended.",
                "unit": "Number of Jobs",
                "precision": 2,
                "order": 1
            },
            "running_job_count": {
                "#": "Support different formulas for aggregate and timeseries queries",
                "aggregate_formula": "SUM(agg.running_job_count)",
                "timeseries_formula": "SUM(agg.started_job_count)",
                "name": "${ORGANIZATION_NAME} Number of Running Jobs",
                "description_html": "The total number of ${ORGANIZATION_NAME} jobs that are running.",
                "unit": "Number of Jobs",
                "precision": 2,
                "order": 2
            },
            "disabled_statistic": {
                "#": "This statistic is disabled and should not be considered at all",
                "disabled": true,
                "formula": "1",
                "name": "1",
                "description_html": "Disabled Statistic",
                "unit": "Disabled"
            }
        }
    }
}
